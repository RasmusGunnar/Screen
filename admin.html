<!DOCTYPE html>
<html lang="da">
  <head>
    <meta charset="UTF-8" />
    <title>SUBRA · Adminportal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="admin.css" />
  </head>
  <body>
    <div id="admin-app" class="admin-shell">
      <!-- LOGIN VIEW -->
      <section id="login-view" class="auth-panel">
        <div class="auth-inner">
          <h1>SUBRA Admin</h1>
          <p>Log ind for at administrere medarbejdere, slides og indstillinger.</p>

          <form id="login-form" class="auth-form">
            <label>
              <span>E-mail</span>
              <input type="email" id="login-email" autocomplete="username" required />
            </label>
            <label>
              <span>Adgangskode</span>
              <input
                type="password"
                id="login-passcode"
                autocomplete="current-password"
                required
              />
            </label>
            <button type="submit">Log ind</button>
            <p id="login-error" class="auth-error"></p>
            <p id="login-hint" class="auth-hint"></p>
          </form>
        </div>
      </section>

      <!-- MAIN ADMIN -->
      <main id="admin-main" class="hidden">
        <nav class="top-nav" aria-label="Primær navigation">
          <div class="nav-brand">
            <span class="brand-pill">SUBRA</span>
            <div class="nav-location">
              <strong>Head Office</strong>
              <small>Senest opdateret for få sekunder siden</small>
            </div>
          </div>
          <div class="nav-links">
            <button type="button" class="nav-link active">Visitors</button>
            <button type="button" class="nav-link">Employees</button>
            <button type="button" class="nav-link">Spaces</button>
            <button type="button" class="nav-link">Deliveries</button>
            <button type="button" class="nav-link">Settings</button>
          </div>
          <div class="nav-actions">
            <button type="button" class="nav-icon" aria-label="Notifikationer">•</button>
            <div class="nav-avatar" aria-hidden="true">SJ</div>
          </div>
        </nav>

        <section class="hero-panel">
          <div class="hero-copy">
            <p class="eyebrow">Kontorstatus</p>
            <h1>SUBRA Workplace Admin</h1>
            <p id="active-admin"></p>
            <div class="status-pills" aria-label="Arbejdsmode">
              <button type="button" class="status-pill active">On-site</button>
              <button type="button" class="status-pill">Remote</button>
              <button type="button" class="status-pill">Off-site</button>
            </div>
          </div>
          <div class="hero-actions">
            <button id="sync-now" class="ghost">Synkroniser nu</button>
            <button id="logout">Log ud</button>
          </div>
        </section>

        <section class="toolbar" aria-label="Visninger og filtre">
          <div class="toolbar-group">
            <button type="button" class="toolbar-link active">Timeline</button>
            <button type="button" class="toolbar-link">Directory</button>
            <button type="button" class="toolbar-link">Bookings</button>
            <button type="button" class="toolbar-link">Resources</button>
          </div>
          <div class="toolbar-group">
            <button type="button" class="ghost">Filtre</button>
            <button type="button" class="ghost">Eksport</button>
          </div>
        </section>

        <section class="panel panel-soft">
          <header>
            <h2>Synk-log</h2>
          </header>
          <div id="sync-log" class="sync-log"></div>
        </section>

        <section class="stat-grid" id="stat-grid" aria-label="Nøgletal"></section>

        <section class="panel">
          <header>
            <h2>Aktivitetslog</h2>
            <div class="filters">
              <label>
                <span>Type</span>
                <select id="activity-type-filter">
                  <option value="all">Alle typer</option>
                  <option value="status-change">Statusændringer</option>
                  <option value="guest-checkin">Gæster</option>
                </select>
              </label>
              <label>
                <span>Afdeling</span>
                <select id="activity-department-filter">
                  <option value="all">Alle afdelinger</option>
                </select>
              </label>
            </div>
          </header>
          <div class="panel-body">
            <div class="table-scroll">
              <table class="activity-table">
                <thead>
                  <tr>
                    <th>Dato</th>
                    <th>Person</th>
                    <th>Type</th>
                    <th>Detaljer</th>
                  </tr>
                </thead>
                <tbody id="activity-body"></tbody>
              </table>
            </div>
          </div>
        </section>

        <section class="panel">
          <header>
            <h2>Eksport af log</h2>
          </header>
          <form id="export-form" class="panel-form">
            <div class="form-row">
              <label>
                <span>Medarbejder</span>
                <select id="export-employee"></select>
              </label>
              <label>
                <span>Fra dato</span>
                <input type="date" id="export-from" />
              </label>
              <label>
                <span>Til dato</span>
                <input type="date" id="export-to" />
              </label>
            </div>
            <div class="form-row">
              <label>
                <input type="checkbox" id="export-include-guests" checked />
                <span>Inkludér gæster</span>
              </label>
              <label>
                <input type="checkbox" id="export-include-status" checked />
                <span>Inkludér statusændringer</span>
              </label>
            </div>
            <button type="submit">Eksportér CSV</button>
            <p id="export-feedback" class="panel-feedback"></p>
          </form>
        </section>

        <section class="panel">
          <header>
            <h2>Medarbejdere</h2>
            <div class="panel-actions">
              <button id="new-employee" type="button">Ny medarbejder</button>
              <button id="reset-form" type="button" class="ghost">Ryd formular</button>
            </div>
          </header>
          <div class="panel-body">
            <form id="employee-form" class="panel-form">
              <input type="hidden" id="employee-id" />
              <div class="form-row">
                <label>
                  <span>Fornavn</span>
                  <input id="employee-first" required />
                </label>
                <label>
                  <span>Efternavn</span>
                  <input id="employee-last" required />
                </label>
                <label>
                  <span>Afdeling</span>
                  <input id="employee-department" required />
                </label>
              </div>
              <div class="form-row">
                <label>
                  <span>Rolle/titel</span>
                  <input id="employee-role" />
                </label>
                <label>
                  <span>Kontaktoplysninger</span>
                  <input id="employee-contact" />
                </label>
                <label>
                  <span>Foto-URL</span>
                  <input id="employee-photo" />
                </label>
              </div>
              <button type="submit">Gem medarbejder</button>
            </form>

            <div id="employee-list" class="list"></div>
          </div>
        </section>

        <section class="panel">
          <header>
            <h2>Fravær</h2>
          </header>
          <div class="panel-body">
            <div id="absence-list" class="list"></div>
          </div>
        </section>

        <section class="panel">
          <header>
            <h2>Slides / pauseskærm</h2>
            <div class="panel-actions">
              <button id="add-slide" type="button">Tilføj slide</button>
              <input
                type="file"
                id="slide-upload"
                accept="image/*"
                style="display: none"
              />
            </div>
          </header>
          <div class="panel-body">
            <div id="screensaver-admin" class="list"></div>
          </div>
        </section>

        <section class="panel">
          <header>
            <h2>QR-selvbetjening</h2>
          </header>
          <div class="panel-body">
            <form id="qr-form" class="panel-form">
              <label>
                <span>Medarbejder-URL</span>
                <input id="qr-employee" placeholder="https://..." />
              </label>
              <button type="submit">Gem</button>
            </form>
            <p>Aktuelt link:</p>
            <p id="qr-employee-link"></p>
          </div>
        </section>

        <section class="panel">
          <header>
            <h2>Politikker</h2>
          </header>
          <div class="panel-body">
            <form id="policy-form" class="panel-form">
              <label>
                <span>NDA-link (PDF)</span>
                <input id="policy-nda-link" type="url" placeholder="https://..." />
              </label>
              <button type="submit">Gem</button>
              <p id="policy-feedback" class="panel-feedback"></p>
            </form>
          </div>
        </section>
      </main>
    </div>

    <!-- Firebase SDK'er (compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>

    <!-- Konfiguration -->
    <script src="firebase-config.js"></script>
    <script src="local-config.js"></script>
    <script src="defaults.js"></script>

    <!-- Admin-logik -->
    <script src="admin.js"></script>
  </body>
</html>
