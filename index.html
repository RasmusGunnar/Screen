<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SUBRA Workplace Arrival Portal</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app-container">
    <section id="screensaver" class="screensaver welcome-screen">
      <div class="screensaver-slides"></div>

      <div class="welcome-surface">
        <div class="welcome-header">
          <img src="assets/LOGO_SUBRA_sort_transp-web.png" alt="SUBRA" class="logo welcome-logo" />
        </div>

      <div class="welcome-hero">
        <div class="welcome-body">
          <p class="welcome-eyebrow">Velkommen til</p>
          <h1 class="welcome-title">SUBRA</h1>
          <p class="welcome-sub">Tryk p√• Visitor In for at starte din registrering.</p>
        </div>

        <div class="welcome-qr-card" aria-live="polite">
          <div class="welcome-qr-label">
            <svg aria-hidden="true" focusable="false" width="22" height="22" viewBox="0 0 24 24">
              <path
                d="M7 4h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm0 2v12h10V6H7Zm3 13h4v1h-4v-1Z"
                fill="currentColor"
              />
            </svg>
            <span>Scan to visit</span>
          </div>
          <div id="welcome-qr" class="welcome-qr"></div>
        </div>
      </div>

      <a class="welcome-primary" href="visitor-registration.html">
        <span>Visitor In</span>
        <span aria-hidden="true" class="welcome-primary-icon">‚ûú</span>
      </a>

      <nav class="welcome-nav" aria-label="Handlinger">
        <a class="welcome-nav-link" href="quick-checkin.html">
          <span class="welcome-nav-icon" aria-hidden="true">üë§</span>
          Employees
        </a>
        <a class="welcome-nav-link" href="#deliveries">
          <span class="welcome-nav-icon" aria-hidden="true">üì¶</span>
          Deliveries
        </a>
        <a class="welcome-nav-link" href="#visitor-out">
          <span class="welcome-nav-icon" aria-hidden="true">‚Ü©</span>
          Visitor Out
        </a>
      </nav>
      </div>
    </section>

    <template id="screensaver-slide-template">
      <div class="slide">
      </div>
    </template>

    <main id="main-app" class="hidden">
      <header class="app-header app-bar">
        <div class="brand app-brand">
          <img src="assets/LOGO_SUBRA_sort_transp-web.png" alt="SUBRA" class="logo" />
          <div class="brand-copy">
            <h1>SUBRA Workplace Arrival Portal</h1>
            <p class="subline">Oversigt over medarbejdere, g√¶ster og tilstedev√¶relse</p>
          </div>
        </div>
        <div class="header-widgets app-bar-actions">
          <div class="widget clock" id="live-clock"></div>
          <div class="widget weather">
            <p>K√∏benhavn</p>
            <p class="temperature">19¬∞C ¬∑ Skyet</p>
          </div>
          <a class="ghost-button app-ghost" href="admin.html" target="_blank" rel="noopener">Admin login</a>
        </div>
      </header>

      <section class="status-summary" id="status-summary">
        <button type="button" class="summary-card" data-summary-target="onsite">
          <span class="summary-label">P√• kontoret</span>
          <span class="summary-value" data-summary="onsite">0</span>
        </button>
        <button type="button" class="summary-card" data-summary-target="remote">
          <span class="summary-label">Arbejder hjemmefra</span>
          <span class="summary-value" data-summary="remote">0</span>
        </button>
        <button type="button" class="summary-card" data-summary-target="away">
          <span class="summary-label">Frav√¶r</span>
          <span class="summary-value" data-summary="away">0</span>
        </button>
        <button type="button" class="summary-card" data-summary-target="guests">
          <span class="summary-label">G√¶ster registreret i dag</span>
          <span class="summary-value" data-summary="guests">0</span>
        </button>
        <button type="button" class="summary-card summary-warning" data-summary-target="unknown">
          <span class="summary-label">Mangler status i dag</span>
          <span class="summary-value" data-summary="unknown">0</span>
        </button>
      </section>

      <section class="missing-status" id="missing-status">
        <div class="missing-status-header">
          <div>
            <p class="eyebrow">Overblik</p>
            <h2>Ingen status valgt i dag</h2>
            <p class="subline">Synligg√∏r medarbejdere der ikke har tjekket ind eller valgt en status.</p>
          </div>
          <div class="missing-count" id="missing-count">0 medarbejdere</div>
        </div>
        <div class="missing-status-list" id="missing-status-list"></div>
      </section>

      <section class="departments" id="departments"></section>

      <section class="quick-actions-bar" aria-label="Hurtige handlinger">
        <div class="quick-actions">
          <button class="primary" data-quick="checkin">Tjek alle ind (brand√∏velse)</button>
          <button class="ghost" data-quick="checkout">T√∏m bygningen</button>
          <button class="ghost" data-quick="rollcall">Evakueringsliste</button>
        </div>
      </section>

      <section class="feature-highlight">
        <h2>Udvidelser inspireret af Swipedon</h2>
        <ul>
          <li>Digital log over alle check-ins/-outs og g√¶stebes√∏g med tidsstempel.</li>
          <li>Evakueringsliste i realtid til sikkerhed og compliance.</li>
          <li>NDA/IT-politik modal ved check-in for b√•de medarbejdere og g√¶ster.</li>
          <li>QR-koder til hurtig selvbetjening for medarbejdere og g√¶ster.</li>
          <li>Integration til adgangskontrol eller notifikationssystemer (SMS/mail webhooks).</li>
        </ul>
      </section>

      <footer class="app-footer">
        <p>SUBRA ¬∑ Workplace Arrival Portal ¬∑ Designet til 16:9 vertikal sk√¶rm</p>
      </footer>
    </main>
  </div>

  <div id="status-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <button class="modal-close" aria-label="Luk" id="modal-close">&times;</button>
      <h2 id="modal-title">Opdater status</h2>
      <form id="status-form">
        <p class="modal-employee" id="modal-employee"></p>
        <div class="form-group">
          <label for="status-type">Status</label>
          <select id="status-type">
            <option value="onsite">P√• kontoret</option>
            <option value="remote">Arbejder hjemme</option>
            <option value="left">G√•et hjem for i dag</option>
            <option value="away">Frav√¶r (sygdom/barsel)</option>
          </select>
        </div>
        <div class="form-group">
          <label for="absence-from">Frav√¶r fra</label>
          <input type="date" id="absence-from" />
        </div>
        <div class="form-group">
          <label for="absence-to">Frav√¶r til</label>
          <input type="date" id="absence-to" />
        </div>
        <div class="form-group">
          <label for="status-notes">Noter</label>
          <textarea id="status-notes" rows="2" placeholder="F.eks. syg, barsel, ferie..."></textarea>
        </div>
        <button type="submit" class="primary">Gem</button>
      </form>
    </div>
  </div>

  <div id="summary-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="summary-title">
    <div class="modal-content summary-modal">
      <button class="modal-close" aria-label="Luk" id="summary-close">&times;</button>
      <h2 id="summary-title">Detaljer</h2>
      <div id="summary-list" class="summary-list"></div>
    </div>
  </div>

  <!-- ======================= -->
  <!-- SCRIPTS: RIGTIG R√ÜKKEF√òLGE -->
  <!-- 1) 3. parts libs (QR)   -->
  <!-- 2) Firebase SDK (compat)-->
  <!-- 3) Konfig (vores filer) -->
  <!-- 4) Adapter -> App       -->
  <!-- ======================= -->

  <!-- 1) QRCode lib -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <!-- 2) Firebase SDK (compat) ‚Äì UDEN integrity/crossorigin -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>

  <!-- 3) Konfig -->
  <script src="firebase-config.js"></script>
  <script src="local-config.js"></script>
  <script src="defaults.js"></script>

  <!-- 4) Adapter + app -->
  <script src="local-backend-adapter.js"></script>
  <script src="firebase-adapter.js"></script>
  <script src="app.js"></script>
</body>
</html>
